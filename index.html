<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>rickymiyake.com</title>
  <style>
    body {
      margin: 0;
      background-color: white;
      font-family: sans-serif;
      color: black;
    }

    #typewriter {
      position: relative;
      display: inline-block;
    }

    #typewriter::after {
      content: "|";
      animation: blink 1s infinite;
      opacity: var(--cursor-opacity, 1);
      position: relative;
      z-index: 2;
    }

    @keyframes blink {
      0%, 50% { opacity: 1; }
      51%, 100% { opacity: 0; }
    }

    /* Highlight vor dem Text mit 20% Transparenz rosa */
    #typewriter .highlight {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(255, 192, 203, 0.2);
      pointer-events: none;
      z-index: 1;
      border-radius: 2px;
    }
  </style>
</head>
<body>

  <header>
    <a href="index.html" class="logo-button"><span id="typewriter"></span></a>
  </header>

  <script>
    const text = "rickymiyake.com";
    const el = document.getElementById("typewriter");
    let i = 0, hasMistyped = false;

    function randomSpeed() {
      // 10% schneller als original (80-180 ms)
      return (Math.random() * (180 - 80) + 80) * 0.9;
    }

    function addHighlight() {
      if (!el.querySelector(".highlight")) {
        const highlight = document.createElement("span");
        highlight.className = "highlight";
        el.appendChild(highlight);
      }
    }

    function removeHighlight() {
      const highlight = el.querySelector(".highlight");
      if (highlight) {
        el.removeChild(highlight);
      }
    }

    function typeWriter() {
      if (i <= text.length) {
        if (i === 5 && !hasMistyped) {
          el.textContent = text.slice(0, i) + "x";
          hasMistyped = true;
          setTimeout(() => {
            el.textContent = text.slice(0, i);
            setTimeout(typeWriter, randomSpeed());
          }, 500);
          return;
        }
        el.textContent = text.slice(0, i++);
        if (i <= text.length) {
          setTimeout(typeWriter, randomSpeed());
        } else {
          // Nach kompletter Ausgabe 2 Sekunden warten
          setTimeout(() => {
            // Highlight hinzufÃ¼gen + Cursor ausblenden
            addHighlight();
            el.style.setProperty("--cursor-opacity", "0");
            // Highlight 0.5 Sekunden zeigen, dann Neustart
            setTimeout(() => {
              removeHighlight();
              el.textContent = "";
              el.style.removeProperty("--cursor-opacity");
              i = 0; hasMistyped = false;
              setTimeout(typeWriter, 500);
            }, 500);
          }, 2000);
        }
      }
    }

    document.addEventListener("DOMContentLoaded", typeWriter);
  </script>

</body>
</html>
